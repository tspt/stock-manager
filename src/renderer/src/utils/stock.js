const upColor = '#00da3c'
const downColor = '#ec0000'
function splitData(rawData) {
  let categoryData = []
  let values = []
  let volumes = []
  let closePrices = rawData.map((item) => item[1])
  console.log(closePrices)
  const { dif, dea, histogram } = calculateMACD(closePrices)
  for (let i = 0; i < rawData.length; i++) {
    categoryData.push(rawData[i].splice(0, 1)[0])
    values.push(rawData[i])
    volumes.push([i, rawData[i][4], rawData[i][0] > rawData[i][1] ? 1 : -1])
  }
  return {
    categoryData,
    values,
    volumes,
    dif,
    dea,
    histogram
  }
}

function calculateMA(dayCount, data) {
  var result = []
  for (var i = 0, len = data.values.length; i < len; i++) {
    if (i < dayCount) {
      result.push('-')
      continue
    }
    var sum = 0
    for (var j = 0; j < dayCount; j++) {
      sum += data.values[i - j][1]
    }
    result.push(+(sum / dayCount).toFixed(3))
  }
  return result
}

// 计算EMA数组
function calculateEMA(data, period) {
  const ema = []
  const multiplier = 2 / (period + 1)
  // 初始EMA为前period日的简单平均
  let sum = 0
  for (let i = 0; i < period; i++) sum += data[i]
  ema[period - 1] = sum / period // 初始EMA
  // 递归计算后续EMA
  for (let i = period; i < data.length; i++) {
    ema[i] = (data[i] - ema[i - 1]) * multiplier + ema[i - 1]
  }
  return ema
}
// 输入：收盘价数组 closePrices，参数 short=12, long=26, signal=9
function calculateMACD(closePrices, short = 12, long = 26, signal = 9) {
  const ema12 = calculateEMA(closePrices, short)
  const ema26 = calculateEMA(closePrices, long)
  const dif = ema12.map((ema, index) => ema - ema26[index])
  const dea = calculateEMA(dif.slice(long - 1), signal) // DEA从DIF有效值开始
  const histogram = dif.slice(long - 1 + signal - 1).map((d, i) => (d - dea[i]) * 2)

  return { dif, dea, histogram }
}

let rawData = [
  ['2004-01-02', 10452.74, 10409.85, 10367.41, 10554.96, 168890000],
  ['2004-01-05', 10411.85, 10544.07, 10411.85, 10575.92, 221290000],
  ['2004-01-06', 10543.85, 10538.66, 10454.37, 10584.07, 191460000],
  ['2004-01-07', 10535.46, 10529.03, 10432, 10587.55, 225490000],
  ['2004-01-08', 10530.07, 10592.44, 10480.59, 10651.99, 237770000],
  ['2004-01-09', 10589.25, 10458.89, 10420.52, 10603.48, 223250000],
  ['2004-01-12', 10461.55, 10485.18, 10389.85, 10543.03, 197960000],
  ['2004-01-13', 10485.18, 10427.18, 10341.19, 10539.25, 197310000],
  ['2004-01-14', 10428.67, 10538.37, 10426.89, 10573.85, 186280000],
  ['2004-01-15', 10534.52, 10553.85, 10454.52, 10639.03, 260090000],
  ['2004-01-16', 10556.37, 10600.51, 10503.7, 10666.88, 254170000],
  ['2004-01-20', 10601.4, 10528.66, 10447.92, 10676.96, 224300000],
  ['2004-01-21', 10522.77, 10623.62, 10453.11, 10665.7, 214920000],
  ['2004-01-22', 10624.22, 10623.18, 10545.03, 10717.4, 219720000],
  ['2004-01-23', 10625.25, 10568.29, 10490.14, 10691.77, 234260000],
  ['2004-01-26', 10568, 10702.51, 10510.44, 10725.18, 186170000],
  ['2004-01-27', 10701.1, 10609.92, 10579.33, 10748.81, 206560000],
  ['2004-01-28', 10610.07, 10468.37, 10412.44, 10703.25, 247660000],
  ['2004-01-29', 10467.41, 10510.29, 10369.92, 10611.56, 273970000],
  ['2004-01-30', 10510.22, 10488.07, 10385.56, 10551.03, 208990000],
  ['2004-02-02', 10487.78, 10499.18, 10395.55, 10614.44, 224800000],
  ['2004-02-03', 10499.48, 10505.18, 10414.15, 10571.48, 183810000],
  ['2004-02-04', 10503.11, 10470.74, 10394.81, 10567.85, 227760000],
  ['2004-02-05', 10469.33, 10495.55, 10399.92, 10566.37, 187810000],
  ['2004-02-06', 10494.89, 10593.03, 10433.7, 10634.81, 182880000],
  ['2004-02-09', 10592, 10579.03, 10433.7, 10634.81, 160720000],
  ['2004-02-10', 10578.74, 10613.85, 10511.18, 10667.03, 160590000],
  ['2004-02-11', 10605.48, 10737.7, 10561.55, 10779.4, 277850000],
  ['2004-02-12', 10735.18, 10694.07, 10636.44, 10775.03, 197560000],
  ['2004-02-13', 10696.22, 10627.85, 10578.66, 10755.47, 208340000],
  ['2004-02-17', 10628.88, 10714.88, 10628.88, 10762.07, 169730000],
  ['2004-02-18', 10706.68, 10671.99, 10623.62, 10764.36, 164370000],
  ['2004-02-19', 10674.59, 10664.73, 10626.44, 10794.95, 219890000],
  ['2004-02-20', 10666.29, 10619.03, 10559.11, 10722.77, 220560000],
  ['2004-02-23', 10619.55, 10609.62, 10508.89, 10711.84, 229950000],
  ['2004-02-24', 10609.55, 10566.37, 10479.33, 10681.4, 225670000],
  ['2004-02-25', 10566.59, 10601.62, 10509.4, 10660.73, 192420000],
  ['2004-02-26', 10598.14, 10580.14, 10493.7, 10652.96, 223230000],
  ['2004-02-27', 10581.55, 10583.92, 10519.03, 10689.55, 200050000],
  ['2004-03-01', 10582.25, 10678.14, 10568.74, 10720.14, 185030000],
  ['2004-03-02', 10678.36, 10591.48, 10539.4, 10713.92, 215580000],
  ['2004-03-03', 10588.59, 10593.11, 10506.66, 10651.03, 188800000],
  ['2004-03-04', 10593.48, 10588, 10522.59, 10645.33, 161050000],
  ['2004-03-05', 10582.59, 10595.55, 10497.11, 10681.4, 223550000],
  ['2004-03-08', 10595.37, 10529.48, 10505.85, 10677.85, 199300000],
  ['2004-03-09', 10529.52, 10456.96, 10391.48, 10567.03, 246270000],
  ['2004-03-10', 10457.59, 10296.89, 10259.34, 10523.11, 259000000],
  ['2004-03-11', 10288.85, 10128.38, 10102.75, 10356.22, 292050000],
  ['2004-03-12', 10130.67, 10240.08, 10097.04, 10281.63, 223350000],
  ['2004-03-15', 10238.45, 10102.89, 10066.08, 10252.68, 219150000],
  ['2004-03-16', 10103.41, 10184.67, 10085.34, 10253.26, 194560000],
  ['2004-03-17', 10184.3, 10300.3, 10184.3, 10356.59, 181210000],
  ['2004-03-18', 10298.96, 10295.78, 10187.78, 10355.04, 218820000],
  ['2004-03-19', 10295.85, 10186.6, 10163.71, 10355.41, 261590000],
  ['2004-03-22', 10185.93, 10064.75, 9985.19, 10185.93, 248930000],
  ['2004-03-23', 10066.67, 10063.64, 10020.75, 10177.04, 215260000],
  ['2004-03-24', 10065.41, 10048.23, 9975.86, 10140.23, 224310000],
  ['2004-03-25', 10049.56, 10218.82, 10049.56, 10246.15, 216420000],
  ['2004-03-26', 10218.37, 10212.97, 10145.63, 10306.22, 198830000],
  ['2004-03-29', 10212.91, 10329.63, 10212.91, 10389.93, 197150000],
  ['2004-03-30', 10327.63, 10381.7, 10264.15, 10411.41, 189060000],
  ['2004-03-31', 10380.89, 10357.7, 10287.11, 10428.59, 207400000],
  ['2004-04-01', 10357.52, 10373.33, 10299.48, 10449.33, 218660000],
  ['2004-04-02', 10375.33, 10470.59, 10375.33, 10548.74, 243070000],
  ['2004-04-05', 10470.59, 10558.37, 10423.33, 10582.22, 182130000],
  ['2004-04-06', 10553.76, 10570.81, 10467.26, 10596.37, 175720000],
  ['2004-04-07', 10569.26, 10480.15, 10422.74, 10580.51, 218040000],
  ['2004-04-08', 10482.77, 10442.03, 10383.84, 10590.15, 187730000],
  ['2004-04-12', 10444.38, 10515.56, 10439.27, 10559.28, 142190000],
  ['2004-04-13', 10516.05, 10381.28, 10343.17, 10572.13, 202540000],
  ['2004-04-14', 10378.1, 10377.95, 10259.35, 10453.39, 230460000],
  ['2004-04-15', 10377.95, 10397.46, 10279.37, 10481.21, 262880000],
  ['2004-04-16', 10398.32, 10451.97, 10343.74, 10500.57, 234660000],
  ['2004-04-19', 10451.62, 10437.85, 10351.97, 10501.79, 173340000],
  ['2004-04-20', 10437.85, 10314.5, 10297.39, 10530.61, 204710000],
  ['2004-04-21', 10311.87, 10317.27, 10200.38, 10398.53, 232630000],
  ['2004-04-22', 10314.99, 10461.2, 10255.88, 10529.12, 265740000],
  ['2004-04-23', 10463.11, 10472.84, 10362.97, 10543.95, 277070000],
  ['2004-04-26', 10472.91, 10444.73, 10396.75, 10540.26, 183040000],
  ['2004-04-27', 10445.38, 10478.16, 10410.52, 10570.92, 213410000],
  ['2004-04-28', 10476.67, 10342.6, 10301.65, 10479.58, 232090000],
  ['2004-04-29', 10339.41, 10272.27, 10199.31, 10443.81, 231880000],
  ['2004-04-30', 10273.06, 10225.57, 10198.39, 10374.61, 218010000],
  ['2004-05-03', 10227.27, 10314, 10199.67, 10365.74, 198830000],
  ['2004-05-04', 10314.32, 10317.2, 10232.31, 10403.14, 208020000],
  ['2004-05-05', 10316.98, 10310.95, 10249.63, 10382.98, 172170000],
  ['2004-05-06', 10308.2, 10241.26, 10147.21, 10332.1, 202690000],
  ['2004-05-07', 10240.62, 10117.34, 10086.94, 10302.93, 228140000],
  ['2004-05-10', 10116.28, 9990.02, 9881.86, 10116.28, 272130000],
  ['2004-05-11', 9989.24, 10019.47, 9928.91, 10092.78, 223650000],
  ['2004-05-12', 10011.52, 10045.16, 9822.1, 10089.87, 246410000],
  ['2004-05-13', 10044.31, 10010.74, 9924.94, 10100.24, 215300000],
  ['2004-05-14', 10008.43, 10012.87, 9912.45, 10096.69, 175180000],
  ['2004-05-17', 10009.92, 9906.91, 9827.21, 10009.92, 199660000],
  ['2004-05-18', 9906.71, 9968.51, 9895.77, 10028.27, 191770000],
  ['2004-05-19', 9962.55, 9937.71, 9919.9, 10124.79, 227420000],
  ['2004-05-20', 9939.12, 9937.64, 9867.73, 10014.5, 155570000],
  ['2004-05-21', 9939.34, 9966.74, 9910.81, 10058.5, 180980000],
  ['2004-05-24', 9968.02, 9958.43, 9891.22, 10084.91, 187000000],
  ['2004-05-25', 9958.08, 10117.62, 9895.41, 10139.27, 213950000],
  ['2004-05-26', 10116.84, 10109.89, 10034.16, 10175.75, 171700000],
  ['2004-05-27', 10109.89, 10205.2, 10106.13, 10267.66, 186670000],
  ['2004-05-28', 10205.83, 10188.45, 10137.14, 10250.27, 159560000],
  ['2004-06-01', 10187.18, 10202.65, 10104.07, 10254.17, 166590000],
  ['2004-06-02', 10199.78, 10262.97, 10170.57, 10310.1, 183540000],
  ['2004-06-03', 10261.85, 10195.91, 10163.4, 10309.46, 162840000],
  ['2004-06-04', 10196.83, 10242.82, 10196.83, 10327.84, 161190000],
  ['2004-06-07', 10243.31, 10391.08, 10243.31, 10410.81, 172490000],
  ['2004-06-08', 10389.41, 10432.52, 10323.94, 10462.97, 170220000],
  ['2004-06-09', 10431.1, 10368.44, 10325.07, 10466.59, 175090000],
  ['2004-06-10', 10367.8, 10410.1, 10333.94, 10448, 154090000],
  ['2004-06-14', 10401.23, 10334.73, 10283.48, 10403.5, 166530000],
  ['2004-06-15', 10336.51, 10380.43, 10319.89, 10464.04, 223780000],
  ['2004-06-16', 10380.23, 10379.58, 10320.6, 10433.52, 153020000],
  ['2004-06-17', 10378.59, 10377.52, 10308.25, 10417.69, 169820000],
  ['2004-06-18', 10375.82, 10416.41, 10328.2, 10471.84, 300680000],
  ['2004-06-21', 10417.82, 10371.47, 10336.44, 10471.76, 175300000],
  ['2004-06-22', 10370.21, 10395.07, 10284.24, 10431.05, 203470000],
  ['2004-06-23', 10395.14, 10479.57, 10323.32, 10498.67, 210770000],
  ['2004-06-24', 10477.43, 10443.81, 10398.16, 10530.01, 214330000],
  ['2004-06-25', 10444.24, 10371.84, 10329.88, 10514.67, 308250000],
  ['2004-06-28', 10377.52, 10357.09, 10317.64, 10505.16, 231100000],
  ['2004-06-29', 10356.35, 10413.43, 10315.65, 10460.25, 180210000],
  ['2004-06-30', 10413.43, 10435.48, 10348.98, 10489.16, 227800000],
  ['2004-07-01', 10434, 10334.16, 10255.55, 10473.23, 234900000],
  ['2004-07-02', 10334, 10282.83, 10228.71, 10371.4, 146600000],
  ['2004-07-06', 10280.26, 10219.34, 10163.6, 10308.43, 180070000],
  ['2004-07-07', 10211.92, 10240.29, 10156.45, 10300.53, 179940000],
  ['2004-07-08', 10238.52, 10171.56, 10134.99, 10297.73, 181790000],
  ['2004-07-09', 10173.12, 10213.22, 10150.32, 10277.16, 161230000],
  ['2004-07-12', 10211.75, 10238.22, 10130.42, 10284.39, 155520000],
  ['2004-07-13', 10238.37, 10247.59, 10188.45, 10297.58, 160630000],
  ['2004-07-14', 10232.84, 10208.8, 10129.31, 10313.95, 298900000],
  ['2004-07-15', 10208.2, 10163.16, 10115.81, 10275.27, 231930000],
  ['2004-07-16', 10162.34, 10139.78, 10095.32, 10289.4, 267310000],
  ['2004-07-19', 10140.95, 10094.06, 10027.33, 10211.6, 198380000],
  ['2004-07-20', 10094.43, 10149.07, 10031.24, 10186.9, 197640000],
  ['2004-07-21', 10156.3, 10046.13, 10027.92, 10279.96, 277570000],
  ['2004-07-22', 10047.6, 10050.33, 9906.62, 10114.41, 247870000],
  ['2004-07-23', 10045.46, 9962.22, 9893.93, 10069.51, 238540000],
  ['2004-07-26', 9964.71, 9961.92, 9874.38, 10054.32, 221240000],
  ['2004-07-27', 9963.54, 10085.14, 9942.75, 10133.95, 236270000],
  ['2004-07-28', 10084.03, 10117.07, 9966.34, 10170.31, 223560000],
  ['2004-07-29', 10115.52, 10129.24, 10049.74, 10213.08, 215050000],
  ['2004-07-30', 10129.12, 10139.71, 10045.76, 10194.13, 197240000],
  ['2004-08-02', 10138.45, 10179.16, 10063.75, 10224.29, 177330000],
  ['2004-08-03', 10178.27, 10120.24, 10064.57, 10228.49, 190880000],
  ['2004-08-04', 10117.96, 10126.51, 10029.02, 10186.16, 157430000],
  ['2004-08-05', 10127.1, 9963.03, 9945.84, 10158.44, 178250000],
  ['2004-08-06', 9960.67, 9815.33, 9767.54, 9963.47, 215870000],
  ['2004-08-09', 9816.14, 9814.66, 9773.74, 9902.49, 148320000],
  ['2004-08-10', 9815.55, 9944.67, 9798.44, 9961.7, 167590000],
  ['2004-08-11', 9931.24, 9938.32, 9804.63, 9981.61, 182920000],
  ['2004-08-12', 9936.48, 9814.59, 9780.52, 9940.02, 248090000],
  ['2004-08-13', 9814.11, 9825.35, 9746.6, 9897.34, 182590000],
  ['2004-08-16', 9825.35, 9954.55, 9807.44, 9987.58, 176390000],
  ['2004-08-17', 9955.5, 9972.83, 9916.05, 10053.21, 186120000],
  ['2004-08-18', 9964.22, 10083.15, 9910.82, 10097.01, 187150000],
  ['2004-08-19', 10082.78, 10040.82, 9972.39, 10111.91, 162780000],
  ['2004-08-20', 10040.81, 10110.14, 9989.65, 10143.76, 175000000],
  ['2004-08-23', 10111.1, 10073.05, 10046.72, 10159.54, 144500000],
  ['2004-08-24', 10074.89, 10098.63, 10044.66, 10165.07, 143050000],
  ['2004-08-25', 10098.49, 10181.74, 10041.93, 10224.29, 172570000],
  ['2004-08-26', 10181.07, 10173.41, 10124.88, 10225.61, 131960000],
  ['2004-08-27', 10174.07, 10195.01, 10143.91, 10235.49, 114580000],
  ['2004-08-30', 10193.83, 10122.52, 10110.43, 10226.87, 114850000],
  ['2004-08-31', 10121.97, 10173.92, 10056.09, 10198.03, 163580000],
  ['2004-09-01', 10170.12, 10168.46, 10092.37, 10230.48, 171950000],
  ['2004-09-02', 10168.39, 10290.28, 10129.01, 10312.99, 181200000],
  ['2004-09-03', 10277.82, 10260.2, 10229.52, 10346.99, 215670000],
  ['2004-09-07', 10261.52, 10341.16, 10255.62, 10388.95, 204530000],
  ['2004-09-08', 10342.42, 10313.36, 10267.94, 10390.64, 222220000],
  ['2004-09-09', 10313.36, 10289.1, 10269.49, 10337.33, 223160000],
  ['2004-09-10', 10289.47, 10313.07, 10196.19, 10348.68, 217580000],
  ['2004-09-13', 10306.65, 10314.76, 10250.61, 10380.47, 203200000],
  ['2004-09-14', 10315.13, 10318.16, 10260.93, 10374.79, 186180000],
  ['2004-09-15', 10316.9, 10231.36, 10195.6, 10324.87, 203740000],
  ['2004-09-16', 10231.59, 10244.49, 10194.35, 10315.72, 173240000],
  ['2004-09-17', 10245.82, 10284.46, 10219.71, 10352.37, 295880000],
  ['2004-09-20', 10283.87, 10204.89, 10152.9, 10293.23, 222360000],
  ['2004-09-21', 10204.52, 10244.93, 10159.54, 10291.39, 223840000],
  ['2004-09-22', 10244.05, 10109.18, 10075.33, 10244.05, 240390000],
  ['2004-09-23', 10108.29, 10038.9, 9999.67, 10134.84, 222620000],
  ['2004-09-24', 10039.42, 10047.24, 9993.92, 10111.39, 204060000],
  ['2004-09-27', 10046.65, 9988.54, 9952.78, 10077.32, 198710000],
  ['2004-09-28', 9989.73, 10077.4, 9950.71, 10132.04, 232170000],
  ['2004-09-29', 10078.06, 10136.24, 10002.57, 10160.5, 218540000],
  ['2004-09-30', 10136.38, 10080.27, 9987.36, 10155.49, 377130000],
  ['2004-10-01', 10082.04, 10192.65, 10081.38, 10237.05, 267550000],
  ['2004-10-04', 10191.4, 10216.54, 10153.79, 10313.81, 253190000],
  ['2004-10-05', 10216.76, 10177.68, 10123.19, 10253.93, 224410000],
  ['2004-10-06', 10170.7, 10239.92, 10112.2, 10267.14, 232020000],
  ['2004-10-07', 10239.84, 10125.4, 10086.83, 10267.57, 275340000],
  ['2004-10-08', 10124.11, 10055.2, 10013.91, 10177.53, 228590000],
  ['2004-10-11', 10056.09, 10081.97, 10017.67, 10142.74, 157180000],
  ['2004-10-12', 10080.42, 10077.18, 9985.44, 10121.49, 215820000],
  ['2004-10-13', 10085.21, 10002.33, 9935.08, 10157.11, 276800000],
  ['2004-10-14', 10002.54, 9894.45, 9837.22, 10048.48, 268650000],
  ['2004-10-15', 9895.63, 9933.38, 9845.56, 10022.31, 317590000],
  ['2004-10-18', 9932.98, 9956.32, 9816.73, 10002.18, 227840000],
  ['2004-10-19', 9958.38, 9897.62, 9854.19, 10064.2, 264220000],
  ['2004-10-20', 9895.19, 9886.93, 9766.95, 9957.05, 272670000],
  ['2004-10-21', 9884.65, 9865.76, 9769.16, 9969.07, 272050000],
  ['2004-10-22', 9863.85, 9757.81, 9732.81, 9920.99, 258220000],
  ['2004-10-25', 9757.22, 9749.99, 9660.18, 9827.2, 233370000],
  ['2004-10-26', 9750.59, 9888.48, 9718.94, 9914.65, 273770000],
  ['2004-10-27', 9888.25, 10002.03, 9807.8, 10051.96, 256200000],
  ['2004-10-28', 9998.94, 10004.54, 9900.42, 10074.89, 254490000],
  ['2004-10-29', 10004.69, 10027.47, 9936.77, 10083.44, 262950000],
  ['2004-11-01', 10028.73, 10054.39, 9953.29, 10124.44, 267040000],
  ['2004-11-02', 10053.87, 10035.73, 9976.29, 10180.85, 369480000],
  ['2004-11-03', 10137.05, 10137.05, 10062.8, 10253.27, 332790000],
  ['2004-11-04', 10132.48, 10314.76, 10076.36, 10352.81, 365770000],
  ['2004-11-05', 10317.05, 10387.54, 10279.96, 10458.1, 325770000],
  ['2004-11-08', 10385.15, 10391.31, 10313.51, 10452.58, 258040000],
  ['2004-11-09', 10387.62, 10386.37, 10327, 10466.81, 248430000],
  ['2004-11-10', 10378.59, 10385.48, 10330.54, 10470.21, 281290000],
  ['2004-11-11', 10386.95, 10469.84, 10364.1, 10513.42, 254080000],
  ['2004-11-12', 10469.21, 10539.01, 10419.77, 10565.48, 322250000],
  ['2004-11-15', 10541.89, 10550.24, 10463.34, 10612.31, 266460000],
  ['2004-11-16', 10549.79, 10487.65, 10445.31, 10570.56, 237060000],
  ['2004-11-17', 10481.83, 10549.57, 10470.21, 10655.09, 295230000],
  ['2004-11-18', 10549.2, 10572.55, 10499.62, 10639.43, 242230000],
  ['2004-11-19', 10571.63, 10456.91, 10419.89, 10588.29, 275340000],
  ['2004-11-22', 10455.73, 10489.42, 10380.95, 10535.46, 240410000],
  ['2004-11-23', 10486.69, 10492.6, 10407.18, 10547.28, 254780000],
  ['2004-11-24', 10493.86, 10520.31, 10451.66, 10565.76, 204070000],
  ['2004-11-26', 10518.69, 10522.23, 10479.52, 10574.7, 91510000],
  ['2004-11-29', 10520.64, 10475.9, 10390.92, 10590.73, 247670000],
  ['2004-11-30', 10475.27, 10428.02, 10380.58, 10530.8, 286900000],
  ['2004-12-01', 10425.8, 10590.22, 10421.66, 10618.59, 307970000],
  ['2004-12-02', 10590.44, 10585.12, 10485.21, 10670.02, 296050000],
  ['2004-12-03', 10597.9, 10592.21, 10515.73, 10670.47, 286270000],
  ['2004-12-06', 10591.32, 10547.06, 10490.31, 10614.82, 218660000],
  ['2004-12-07', 10546.8, 10440.58, 10423.21, 10612.9, 258710000],
  ['2004-12-08', 10438.77, 10494.23, 10395.05, 10550.16, 247020000],
  ['2004-12-09', 10492.45, 10552.82, 10389.81, 10579.94, 278740000],
  ['2004-12-10', 10552.16, 10543.22, 10469.62, 10616.23, 242290000],
  ['2004-12-13', 10543.44, 10638.32, 10520.61, 10678.52, 257530000],
  ['2004-12-14', 10640.53, 10676.45, 10571.67, 10715.76, 303800000],
  ['2004-12-15', 10675.71, 10691.45, 10601.74, 10749.53, 305010000],
  ['2004-12-16', 10691.71, 10705.64, 10612.31, 10776.43, 293600000],
  ['2004-12-17', 10704.83, 10649.92, 10562.76, 10766.01, 619180000],
  ['2004-12-20', 10652.14, 10661.6, 10622.2, 10769.13, 298650000],
  ['2004-12-21', 10661.89, 10759.43, 10646.6, 10789.66, 294880000],
  ['2004-12-22', 10752.34, 10815.89, 10709.78, 10861.33, 252910000],
  ['2004-12-23', 10815, 10827.12, 10780.12, 10895.1, 193270000],
  ['2004-12-27', 10828.01, 10776.13, 10755.67, 10892.52, 170140000],
  ['2004-12-28', 10776.06, 10854.54, 10774.51, 10890.82, 169870000],
  ['2004-12-29', 10853.72, 10829.19, 10771.26, 10872.71, 162830000],
  ['2004-12-30', 10829.12, 10800.3, 10781.67, 10880.03, 146210000],
  ['2004-12-31', 10800.3, 10783.01, 10759.94, 10849.81, 141140000],
  ['2005-01-03', 10783.75, 10729.43, 10694.18, 10892.67, 270620000],
  ['2005-01-04', 10727.81, 10630.78, 10587.48, 10803.62, 293280000],
  ['2005-01-05', 10629.53, 10597.83, 10561.03, 10736.16, 263550000],
  ['2005-01-06', 10593.19, 10622.88, 10555.48, 10708.37, 232850000],
  ['2005-01-07', 10624.8, 10603.96, 10545.8, 10697.81, 242520000],
  ['2005-01-10', 10603.44, 10621.03, 10544.99, 10696.85, 234160000],
  ['2005-01-11', 10619.77, 10556.22, 10504.72, 10632.63, 255650000],
  ['2005-01-12', 10561.32, 10617.78, 10481.37, 10648.52, 293140000],
  ['2005-01-13', 10617.41, 10505.83, 10463.26, 10650.96, 271180000],
  ['2005-01-14', 10506.71, 10558, 10475.01, 10606.47, 223070000],
  ['2005-01-18', 10554.23, 10628.79, 10456.61, 10665.44, 267680000],
  ['2005-01-19', 10626.05, 10539.97, 10519.2, 10668.4, 242250000],
  ['2005-01-20', 10538.9, 10471.47, 10414.72, 10582.09, 242810000],
  ['2005-01-21', 10471.98, 10392.99, 10370.97, 10541.3, 275680000],
  ['2005-01-24', 10393.58, 10368.61, 10317.1, 10491.71, 259170000],
  ['2005-01-25', 10369.42, 10461.56, 10369.42, 10534.72, 260720000],
  ['2005-01-26', 10463.19, 10498.59, 10433.56, 10571.66, 247140000],
  ['2005-01-27', 10498.14, 10467.4, 10379.47, 10535.16, 269690000],
  ['2005-01-28', 10470.58, 10427.2, 10331.58, 10520.61, 358720000],
  ['2005-01-31', 10428.76, 10489.94, 10414.49, 10559.77, 298060000],
  ['2005-02-01', 10489.72, 10551.94, 10464.38, 10609.73, 283800000],
  ['2005-02-02', 10551.05, 10596.79, 10501.02, 10638.25, 279860000],
  ['2005-02-03', 10592.21, 10593.1, 10511.96, 10640.69, 229000000],
  ['2005-02-04', 10593.17, 10716.13, 10553.93, 10750.94, 246270000],
  ['2005-02-07', 10715.76, 10715.76, 10650.59, 10774.8, 218040000],
  ['2005-02-08', 10712.51, 10724.63, 10647.85, 10783.97, 244710000],
  ['2005-02-09', 10717.76, 10664.11, 10621.84, 10781.38, 310030000],
  ['2005-02-10', 10665, 10749.61, 10633.67, 10803.92, 254150000],
  ['2005-02-11', 10742.92, 10796.01, 10680.15, 10865.69, 263370000],
  ['2005-02-14', 10795.72, 10791.13, 10722.63, 10853.8, 215370000],
  ['2005-02-15', 10791.06, 10837.32, 10745.1, 10886.31, 241500000],
  ['2005-02-16', 10832.03, 10834.88, 10746.21, 10889.78, 256940000],
  ['2005-02-17', 10835.03, 10754.26, 10729.95, 10873.6, 257860000],
  ['2005-02-18', 10755.15, 10785.22, 10682.29, 10854.98, 335660000],
  ['2005-02-22', 10783.38, 10611.2, 10596.79, 10806.36, 340910000],
  ['2005-02-23', 10609.28, 10673.79, 10583.64, 10735.42, 268490000],
  ['2005-02-24', 10672.24, 10748.79, 10612.24, 10779.39, 257340000],
  ['2005-02-25', 10748.42, 10841.6, 10698.32, 10871.53, 247140000],
  ['2005-02-28', 10842.05, 10766.23, 10709.41, 10877.07, 288160000],
  ['2005-03-01', 10794.98, 10830, 10769.04, 10849.14, 247210000],
  ['2005-03-02', 10825.68, 10811.97, 10736.16, 10896.66, 235950000],
  ['2005-03-03', 10812.27, 10833.03, 10744.14, 10904.34, 233480000],
  ['2005-03-04', 10834.51, 10940.55, 10834.51, 10996.93, 240210000],
  ['2005-03-07', 10940.55, 10936.86, 10886.09, 11027.15, 229120000],
  ['2005-03-08', 10935.6, 10912.62, 10863.4, 10996.56, 205970000],
  ['2005-03-09', 10912.32, 10805.62, 10768.66, 10949.2, 267970000],
  ['2005-03-10', 10806.28, 10851.51, 10757.36, 10907.45, 224040000],
  ['2005-03-11', 10845.3, 10774.36, 10728.62, 10897.68, 243050000],
  ['2005-03-14', 10773.92, 10804.51, 10709.26, 10859.12, 237050000],
  ['2005-03-15', 10804.29, 10745.1, 10716.87, 10884.76, 237710000],
  ['2005-03-16', 10741.63, 10633.07, 10569.3, 10764.16, 278620000],
  ['2005-03-17', 10633.3, 10626.35, 10561.1, 10707.86, 228160000],
  ['2005-03-18', 10627.83, 10629.67, 10520.6, 10709.85, 531670000],
  ['2005-03-21', 10629.9, 10565.39, 10503.46, 10662.93, 254560000],
  ['2005-03-22', 10565.39, 10470.51, 10446.78, 10651.41, 308690000],
  ['2005-03-23', 10470.58, 10456.02, 10384.34, 10558.51, 327490000],
  ['2005-03-24', 10457.06, 10442.87, 10415.16, 10554.6, 238110000],
  ['2005-03-28', 10444.13, 10485.65, 10412.79, 10568.05, 213820000],
  ['2005-03-29', 10486.1, 10405.7, 10351.76, 10565.46, 301970000],
  ['2005-03-30', 10405.77, 10540.93, 10395.21, 10564.8, 276060000],
  ['2005-03-31', 10541.59, 10503.76, 10448.19, 10586.15, 259250000],
  ['2005-04-01', 10504.57, 10404.3, 10349.02, 10600.56, 318810000],
  ['2005-04-04', 10401.71, 10421.14, 10307.64, 10496.44, 293800000],
  ['2005-04-05', 10421.14, 10458.46, 10372.59, 10530.14, 271690000],
  ['2005-04-06', 10453.45, 10486.02, 10434.22, 10557.18, 237570000],
  ['2005-04-07', 10485.88, 10546.32, 10434.3, 10589.99, 283340000],
  ['2005-04-08', 10546.32, 10461.34, 10445.31, 10584.6, 201110000],
  ['2005-04-11', 10462.08, 10448.56, 10393.36, 10530.58, 192720000],
  ['2005-04-12', 10448.63, 10507.97, 10331.21, 10552.6, 267070000],
  ['2005-04-13', 10507.45, 10403.93, 10355.16, 10567.38, 274850000],
  ['2005-04-14', 10403.71, 10278.75, 10248.23, 10457.06, 303780000],
  ['2005-04-15', 10276.61, 10087.51, 10059.36, 10311.26, 417360000],
  ['2005-04-18', 10088.54, 10071.25, 9961.52, 10183.5, 301220000],
  ['2005-04-19', 10071.55, 10127.41, 10021.08, 10220.21, 285960000],
  ['2005-04-20', 10131.18, 10012.36, 9978.74, 10232.34, 323910000],
  ['2005-04-21', 10010.51, 10218.6, 10010.51, 10250.3, 287550000],
  ['2005-04-22', 10216.68, 10157.71, 10055.29, 10266.48, 272500000],
  ['2005-04-25', 10158.52, 10242.47, 10148.25, 10305.87, 231210000],
  ['2005-04-26', 10240.99, 10151.13, 10108.79, 10298.85, 255270000],
  ['2005-04-27', 10150.32, 10198.8, 10048.27, 10250.23, 248390000],
  ['2005-04-28', 10194.58, 10070.37, 10036.74, 10229.09, 279300000],
  ['2005-04-29', 10073.47, 10192.51, 10021.23, 10231.31, 303790000],
  ['2005-05-02', 10192, 10251.7, 10149.06, 10309.86, 239610000],
  ['2005-05-03', 10251.04, 10256.95, 10169.39, 10327.37, 277710000],
  ['2005-05-04', 10255.25, 10384.64, 10239.95, 10412.2, 275240000],
  ['2005-05-05', 10384.49, 10340.38, 10276.75, 10447.08, 236460000],
  ['2005-05-06', 10339.71, 10345.4, 10300.7, 10454.4, 230410000],
  ['2005-05-09', 10345.4, 10384.34, 10288.95, 10416.56, 204600000],
  ['2005-05-10', 10382.94, 10281.11, 10230.35, 10389.96, 234910000],
  ['2005-05-11', 10272.91, 10300.25, 10172.86, 10355.31, 214890000],
  ['2005-05-12', 10299.74, 10189.48, 10155.86, 10357.37, 249840000],
  ['2005-05-13', 10188.23, 10140.12, 10062.76, 10268.85, 258410000],
  ['2005-05-16', 10139.61, 10252.29, 10118.32, 10274.39, 217230000],
  ['2005-05-17', 10247.49, 10331.88, 10175.81, 10357.3, 241110000],
  ['2005-05-18', 10323.19, 10464.45, 10323.19, 10518.17, 299760000],
  ['2005-05-19', 10464.45, 10493.19, 10394.39, 10538.71, 209180000],
  ['2005-05-20', 10492.75, 10471.91, 10400.6, 10535.24, 232250000],
  ['2005-05-23', 10472.8, 10523.56, 10438.36, 10589.92, 225290000],
  ['2005-05-24', 10522.68, 10503.68, 10433.78, 10550.24, 204650000],
  ['2005-05-25', 10503.17, 10457.8, 10396.46, 10516.17, 187990000],
  ['2005-05-26', 10458.68, 10537.6, 10450.55, 10581.87, 194620000],
  ['2005-05-27', 10537.08, 10542.55, 10489.35, 10579.94, 168060000],
  ['2005-05-31', 10541.89, 10467.48, 10437.77, 10574.92, 240780000],
  ['2005-06-01', 10462.86, 10549.87, 10433.48, 10616.15, 230170000],
  ['2005-06-02', 10548.83, 10553.49, 10478.26, 10590.07, 187680000],
  ['2005-06-03', 10552.82, 10460.97, 10427.35, 10572.18, 222230000],
  ['2005-06-06', 10461.64, 10467.03, 10410.28, 10519.79, 170200000],
  ['2005-06-07', 10466, 10483.07, 10454.18, 10603.15, 213990000],
  ['2005-06-08', 10484.84, 10476.86, 10439.77, 10575.81, 195810000],
  ['2005-06-09', 10477.75, 10503.02, 10410.8, 10556.9, 209810000],
  ['2005-06-10', 10503.02, 10512.63, 10410.5, 10581.13, 217100000],
  ['2005-06-13', 10503.57, 10522.56, 10437.32, 10611.1, 205630000],
  ['2005-06-14', 10521.95, 10547.57, 10473.92, 10617.01, 192030000],
  ['2005-06-15', 10548.65, 10566.37, 10471.69, 10628.67, 220840000],
  ['2005-06-16', 10566.76, 10578.65, 10501.92, 10632.2, 217730000],
  ['2005-06-17', 10580.41, 10623.07, 10561, 10710.38, 373400000],
  ['2005-06-20', 10621.54, 10609.1, 10539.21, 10656.66, 173110000],
  ['2005-06-21', 10608.88, 10599.67, 10545.89, 10670.56, 203440000],
  ['2005-06-22', 10599.36, 10587.93, 10543.28, 10676.24, 198810000],
  ['2005-06-23', 10587.09, 10421.44, 10401.49, 10617.39, 288030000],
  ['2005-06-24', 10422.28, 10297.83, 10266.3, 10452.82, 343150000],
  ['2005-06-27', 10298.07, 10290.78, 10229.4, 10377.55, 220510000],
  ['2005-06-28', 10291.01, 10405.63, 10285.86, 10434.18, 215350000],
  ['2005-06-29', 10405.94, 10374.48, 10332.52, 10472.46, 222550000],
  ['2005-06-30', 10374.18, 10274.97, 10253.49, 10458.19, 301810000],
  ['2005-07-01', 10273.59, 10303.44, 10239.91, 10380.78, 231380000],
  ['2005-07-05', 10292.62, 10371.8, 10282.64, 10388.91, 235620000],
  ['2005-07-06', 10366.52, 10270.68, 10242.21, 10413.23, 237210000],
  ['2005-07-07', 10269.76, 10302.29, 10142.24, 10337.84, 275310000],
  ['2005-07-08', 10302.9, 10449.14, 10279.65, 10486.5, 249260000],
  ['2005-07-11', 10449.6, 10519.72, 10425.97, 10570.67, 225470000],
  ['2005-07-12', 10519.49, 10513.89, 10444.46, 10583.02, 233390000],
  ['2005-07-13', 10513.36, 10557.39, 10481.36, 10596.98, 216660000],
  ['2005-07-14', 10559.86, 10628.88, 10559.86, 10696.96, 267790000],
  ['2005-07-15', 10629.44, 10640.83, 10559.46, 10698.07, 239700000],
  ['2005-07-18', 10640.19, 10574.99, 10533.59, 10681.99, 206290000],
  ['2005-07-19', 10576.9, 10646.56, 10573, 10718.69, 318160000],
  ['2005-07-20', 10629.52, 10689.15, 10535.1, 10726.81, 312420000],
  ['2005-07-21', 10690.03, 10627.77, 10567.98, 10735.33, 281750000],
  ['2005-07-22', 10624.19, 10651.18, 10552.54, 10702.21, 231480000],
  ['2005-07-25', 10651.66, 10596.48, 10565.12, 10709.69, 190250000],
  ['2005-07-26', 10597.6, 10579.77, 10535.58, 10667.9, 220390000],
  ['2005-07-27', 10579.45, 10637.09, 10530.5, 10689.31, 213220000],
  ['2005-07-28', 10633.5, 10705.55, 10603.49, 10745.68, 220170000],
  ['2005-07-29', 10705.16, 10640.91, 10608.27, 10754.6, 215280000],
  ['2005-08-01', 10641.78, 10623.15, 10578.97, 10713.51, 192790000],
  ['2005-08-02', 10623.79, 10683.74, 10600.62, 10729.6, 241690000],
  ['2005-08-03', 10681.51, 10697.59, 10600.02, 10735.17, 237650000],
  ['2005-08-04', 10696.8, 10610.1, 10568.7, 10709.77, 230600000],
  ['2005-08-05', 10610.34, 10558.03, 10512.49, 10643.46, 218240000],
  ['2005-08-08', 10557.24, 10536.93, 10497.45, 10635.65, 185880000],
  ['2005-08-09', 10537.65, 10615.67, 10537.01, 10662.8, 207460000],
  ['2005-08-10', 10606.52, 10594.41, 10553.81, 10746.87, 258420000],
  ['2005-08-11', 10591.83, 10685.89, 10549.43, 10721.56, 234250000],
  ['2005-08-12', 10682.7, 10600.3, 10549.19, 10688.68, 215040000],
  ['2005-08-15', 10599.19, 10634.38, 10532.48, 10687.72, 173340000],
  ['2005-08-16', 10631.59, 10513.45, 10489.24, 10650.14, 232520000],
  ['2005-08-17', 10505.6, 10550.71, 10472.45, 10625.86, 235040000],
  ['2005-08-18', 10531.12, 10554.92, 10517.67, 10592.34, 213900000],
  ['2005-08-19', 10552.7, 10559.23, 10503.9, 10656.59, 219830000],
  ['2005-08-22', 10559.78, 10569.89, 10509.07, 10669.81, 215570000],
  ['2005-08-23', 10571.01, 10519.58, 10475.63, 10604.29, 210670000],
  ['2005-08-24', 10519.34, 10434.87, 10407.56, 10584.3, 256640000],
  ['2005-08-25', 10434.39, 10450.63, 10391.71, 10506.6, 188100000],
  ['2005-08-26', 10450.95, 10397.29, 10355.02, 10480.01, 192100000],
  ['2005-08-29', 10396.9, 10463.05, 10321.42, 10508.35, 202970000],
  ['2005-08-30', 10461.54, 10412.82, 10329.15, 10476.83, 234650000],
  ['2005-08-31', 10415.84, 10481.6, 10357.65, 10484.55, 281200000],
  ['2005-09-01', 10481.44, 10459.63, 10382.09, 10557.47, 278990000],
  ['2005-09-02', 10460.67, 10447.37, 10400.88, 10536.14, 204490000],
  ['2005-09-06', 10447.69, 10589.24, 10447.69, 10621.96, 233670000],
  ['2005-09-07', 10588.68, 10633.5, 10534.23, 10667.1, 226790000],
  ['2005-09-08', 10633.11, 10595.93, 10530.01, 10670.6, 222990000],
  ['2005-09-09', 10594.1, 10678.56, 10573.47, 10727.53, 247140000],
  ['2005-09-12', 10678.41, 10682.94, 10618.13, 10743.77, 201190000],
  ['2005-09-13', 10673.71, 10597.44, 10561.61, 10701.57, 222620000],
  ['2005-09-14', 10545.85, 10558.75, 10488.05, 10627.85, 216300000],
  ['2005-09-15', 10545.85, 10558.75, 10488.05, 10627.85, 225350000],
  ['2005-09-16', 10560.5, 10641.94, 10539.64, 10696.24, 546940000],
  ['2005-09-19', 10641.87, 10557.63, 10497.29, 10656.75, 233530000],
  ['2005-09-20', 10558.19, 10481.52, 10453.98, 10642.26, 244560000],
  ['2005-09-21', 10484.23, 10378.03, 10335.28, 10512.02, 266650000],
  ['2005-09-22', 10376.2, 10422.05, 10303.51, 10489.64, 254260000],
  ['2005-09-23', 10421.81, 10419.59, 10328.59, 10494.42, 238590000],
  ['2005-09-26', 10420.22, 10443.63, 10381.53, 10544.98, 234320000],
  ['2005-09-27', 10444.58, 10456.21, 10376.83, 10534.31, 224960000],
  ['2005-09-28', 10456.61, 10473.08, 10390.05, 10560.02, 238740000],
  ['2005-09-29', 10472.61, 10552.78, 10389.01, 10583.43, 236020000],
  ['2005-09-30', 10540.51, 10568.7, 10526.34, 10569.81, 222160000],
  ['2005-10-03', 10569.5, 10535.48, 10486.17, 10637, 239190000],
  ['2005-10-04', 10534.36, 10441.11, 10409.89, 10618.41, 301840000],
  ['2005-10-05', 10434.81, 10317.36, 10299.27, 10477.21, 266720000],
  ['2005-10-06', 10317.36, 10287.1, 10200.81, 10425.98, 316440000],
  ['2005-10-07', 10287.42, 10292.31, 10221.47, 10387.48, 237340000],
  ['2005-10-10', 10292.95, 10238.76, 10184.09, 10378.19, 236540000],
  ['2005-10-11', 10239.16, 10253.17, 10195.13, 10361.15, 261000000],
  ['2005-10-12', 10247.4, 10216.9, 10186.17, 10308.23, 293420000],
  ['2005-10-13', 10216.91, 10216.59, 10098.18, 10309.2, 270400000],
  ['2005-10-14', 10216.59, 10287.34, 10165.12, 10327.21, 238950000],
  ['2005-10-17', 10287.42, 10348.1, 10213.06, 10419.58, 242880000],
  ['2005-10-18', 10349.14, 10285.26, 10233.47, 10412.85, 297590000],
  ['2005-10-19', 10277.18, 10414.13, 10173.52, 10444.15, 316880000],
  ['2005-10-20', 10411.73, 10281.1, 10230.27, 10483.21, 334850000],
  ['2005-10-21', 10282.22, 10215.22, 10161.6, 10354.02, 357930000],
  ['2005-10-24', 10219.15, 10385, 10219.15, 10411.57, 263690000],
  ['2005-10-25', 10383.88, 10377.87, 10282.78, 10457.52, 246960000],
  ['2005-10-26', 10377.39, 10344.98, 10283.1, 10474.18, 266810000],
  ['2005-10-27', 10334.81, 10229.95, 10229.95, 10348.66, 236490000],
  ['2005-10-28', 10231.15, 10402.77, 10213.14, 10433.51, 283060000],
  ['2005-10-31', 10403.17, 10440.07, 10372.67, 10539.16, 320080000],
  ['2005-11-01', 10437.51, 10406.77, 10352.42, 10510.03, 294480000],
  ['2005-11-02', 10406.29, 10472.73, 10347.7, 10527.32, 279710000],
  ['2005-11-03', 10470.49, 10522.59, 10421.98, 10613.84, 320900000],
  ['2005-11-04', 10523.23, 10530.76, 10441.59, 10593.51, 230870000],
  ['2005-11-07', 10531.24, 10586.23, 10488.74, 10632.34, 241260000],
  ['2005-11-08', 10574.18, 10539.72, 10478.49, 10606.8, 201770000],
  ['2005-11-09', 10539.24, 10546.21, 10466.24, 10637.78, 244430000],
  ['2005-11-10', 10550.61, 10640.1, 10519.71, 10655.22, 293350000],
  ['2005-11-11', 10641.3, 10686.04, 10595.89, 10725.99, 195880000],
  ['2005-11-14', 10686.6, 10697.17, 10618.89, 10756.88, 211290000],
  ['2005-11-15', 10697.01, 10686.44, 10610.08, 10783.62, 267560000],
  ['2005-11-16', 10697.81, 10674.76, 10653.14, 10710.78, 286000000],
  ['2005-11-17', 10677, 10720.22, 10619.61, 10778.5, 274320000],
  ['2005-11-18', 10719.34, 10766.33, 10663.79, 10865.58, 351030000],
  ['2005-11-21', 10766.33, 10820.28, 10708.86, 10871.11, 250280000],
  ['2005-11-22', 10815.96, 10871.43, 10729.99, 10907.77, 311190000],
  ['2005-11-23', 10865.9, 10916.09, 10855.42, 10950.59, 236740000],
  ['2005-11-25', 10915.13, 10931.62, 10883.55, 10997.5, 122460000],
  ['2005-11-28', 10932.74, 10890.72, 10839.37, 10992.39, 259360000],
  ['2005-11-29', 10888.48, 10888.16, 10850.29, 10994.85, 255250000],
  ['2005-11-30', 10883.91, 10805.87, 10789.38, 10959.8, 257650000],
  ['2005-12-01', 10806.03, 10912.57, 10806.03, 10969.97, 256980000],
  ['2005-12-02', 10912.01, 10877.51, 10818.36, 10952.83, 214900000],
  ['2005-12-05', 10876.95, 10835.01, 10766.57, 10923.37, 237340000],
  ['2005-12-06', 10835.41, 10856.86, 10809.15, 10956.13, 264630000],
  ['2005-12-07', 10856.86, 10810.91, 10737.27, 10916.89, 243490000],
  ['2005-12-08', 10808.43, 10755.12, 10705.17, 10871.11, 253290000],
  ['2005-12-09', 10751.76, 10778.58, 10694.05, 10845.33, 238930000],
  ['2005-12-12', 10778.66, 10767.77, 10707.18, 10857.02, 254130000],
  ['2005-12-13', 10765.69, 10823.72, 10694.29, 10902.64, 329050000],
  ['2005-12-14', 10821.32, 10883.51, 10786.34, 10953.07, 336440000],
  ['2005-12-15', 10883.43, 10881.67, 10803.55, 10985.01, 297560000],
  ['2005-12-16', 10881.67, 10875.59, 10830.84, 10978.21, 419040000],
  ['2005-12-19', 10875.51, 10836.53, 10781.7, 10970.04, 331170000],
  ['2005-12-20', 10836.93, 10805.55, 10754.56, 10905.28, 254440000],
  ['2005-12-21', 10805.63, 10833.73, 10776.01, 10933.7, 257850000],
  ['2005-12-22', 10831.56, 10889.44, 10785.93, 10928.34, 229500000],
  ['2005-12-23', 10901.68, 10883.27, 10869.98, 10904.4, 126720000],
  ['2005-12-27', 10883.75, 10777.77, 10754.16, 10956.99, 174190000],
  ['2005-12-28', 10778.25, 10796.26, 10750.4, 10858.07, 153230000],
  ['2005-12-29', 10795.7, 10784.82, 10747.76, 10870.71, 160010000],
  ['2005-12-30', 10783.86, 10717.5, 10675.64, 10801.87, 191020000],
  ['2006-01-03', 10718.3, 10847.41, 10650.18, 10888.4, 302950000],
  ['2006-01-04', 10843.97, 10880.15, 10772.89, 10946.27, 271490000],
  ['2006-01-05', 10880.39, 10882.15, 10797.55, 10951.39, 250910000],
  ['2006-01-06', 10875.45, 10959.31, 10846.21, 11005.98, 291740000]
]

var data = splitData(rawData)
myChart.setOption(
  (option = {
    animation: false,
    legend: {
      top: 10,
      left: 'center',
      // data: ['Volume', 'Volume', 'MA5', 'MA10', 'MA20', 'MA30', 'MA60', 'MA120', 'MA240'],
      itemStyle: {
        opacity: 0 // 图例图标完全透明
      }
    },
    tooltip: {
      trigger: 'axis',
      axisPointer: {
        type: 'cross'
      },
      borderWidth: 1,
      borderColor: '#ccc',
      padding: 10,
      textStyle: {
        color: '#000'
      },
      position: function (pos, params, el, elRect, size) {
        const obj = {
          top: 10
        }
        obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30
        return obj
      }
      // extraCssText: 'width: 170px'
    },
    axisPointer: {
      link: [
        {
          xAxisIndex: 'all'
        }
      ],
      label: {
        backgroundColor: '#666'
      }
    },
    toolbox: {
      feature: {
        dataZoom: {
          yAxisIndex: false
        },
        brush: {
          type: ['lineX', 'clear']
        }
      }
    },
    visualMap: {
      show: false,
      seriesIndex: [0, 1], // 对应series的index
      dimension: 2,
      pieces: [
        {
          value: 1,
          color: downColor
        },
        {
          value: -1,
          color: upColor
        }
      ]
    },
    grid: [
      {
        left: '10%',
        right: '8%',
        height: '30%'
      },
      {
        left: '10%',
        right: '8%',
        top: '40%',
        height: '15%'
      },
      {
        left: '10%',
        right: '8%',
        top: '55%',
        height: '15%'
      }
    ],
    xAxis: [
      {
        type: 'category',
        data: data.categoryData,
        boundaryGap: false,
        axisLine: { onZero: false },
        splitLine: { show: false },
        min: 'dataMin',
        max: 'dataMax',
        axisPointer: {
          z: 100
        }
      },
      {
        type: 'category',
        gridIndex: 1,
        data: data.categoryData,
        boundaryGap: false,
        axisLine: { onZero: false },
        axisTick: { show: false },
        splitLine: { show: false },
        axisLabel: { show: false },
        min: 'dataMin',
        max: 'dataMax'
      },
      {
        type: 'category',
        gridIndex: 2,
        data: data.categoryData,
        boundaryGap: false,
        axisLine: { onZero: false },
        axisTick: { show: false },
        splitLine: { show: false },
        axisLabel: { show: false },
        min: 'dataMin',
        max: 'dataMax'
      }
    ],
    yAxis: [
      {
        scale: true,
        gridIndex: 0,
        splitArea: {
          show: true
        }
      },
      {
        scale: true,
        gridIndex: 1,
        splitNumber: 2,
        axisLabel: { show: false },
        axisLine: { show: false },
        axisTick: { show: false },
        splitLine: { show: false }
      },
      {
        scale: true,
        gridIndex: 2,
        splitLine: { show: false },
        splitNumber: 4
      }
    ],
    dataZoom: [
      {
        type: 'inside',
        xAxisIndex: [0, 1],
        start: 0,
        end: 100
      },
      {
        type: 'inside',
        xAxisIndex: [1, 2],
        start: 0,
        end: 100
      }
      // {
      //   type: 'inside',
      //   xAxisIndex: [0, 1],
      //   start: 98,
      //   end: 100
      // },
    ],
    series: [
      {
        name: 'Volume',
        type: 'bar',
        xAxisIndex: 1,
        yAxisIndex: 1,
        data: data.volumes
      },
      // MACD-DIF线（蓝色）
      {
        type: 'line',
        name: 'DIF',
        xAxisIndex: 2,
        yAxisIndex: 2,
        data: dif.map((value, index) => [timeData[index + 25], value]), // 对齐时间戳
        lineStyle: { color: '#5470c6' }
      },
      // MACD-DEA线（橙色）
      {
        type: 'line',
        name: 'DEA',
        xAxisIndex: 2,
        yAxisIndex: 2,
        data: dea.map((value, index) => [timeData[index + 25 + 8], value]), // 对齐时间戳
        lineStyle: { color: '#fac858' }
      },
      // MACD柱状图（红涨绿跌）
      {
        type: 'bar',
        name: 'MACD',
        xAxisIndex: 2,
        yAxisIndex: 2,
        data: histogram.map((value, index) => ({
          value: [timeData[index + 25 + 8], value],
          itemStyle: { color: value > 0 ? '#ef232a' : '#14b143' }
        })),
        barWidth: '60%'
      },
      // // DIF（快线）
      // {
      //   type: 'line',
      //   xAxisIndex: 2,
      //   yAxisIndex: 2,
      //   data: data.dif,
      //   smooth: true,
      //   lineStyle: { color: '#FF9800' }
      // },
      // // DEA（慢线）
      // {
      //   type: 'line',
      //   xAxisIndex: 2,
      //   yAxisIndex: 2,
      //   data: data.dea,
      //   smooth: true,
      //   lineStyle: { color: '#2196F3' }
      // },
      // // MACD柱状图（红涨绿跌）
      // {
      //   type: 'bar',
      //   xAxisIndex: 2,
      //   yAxisIndex: 2,
      //   data: data.histogram.map((item) => ({
      //     value: item,
      //     itemStyle: {
      //       color: item > 0 ? '#EF5350' : '#26A69A'
      //     }
      //   }))
      // },
      {
        name: 'Dow-Jones index',
        type: 'candlestick',
        data: data.values,
        itemStyle: {
          color: upColor,
          color0: downColor,
          borderColor: undefined,
          borderColor0: undefined
        }
      },
      {
        name: 'MA5',
        type: 'line',
        symbol: 'none', // 关键配置：隐藏数据点
        data: calculateMA(5, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      },
      {
        name: 'MA10',
        type: 'line',
        symbol: 'none', // 关键配置：隐藏数据点
        data: calculateMA(10, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      },
      {
        name: 'MA20',
        symbol: 'none', // 关键配置：隐藏数据点
        type: 'line',
        data: calculateMA(20, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      },
      {
        name: 'MA30',
        type: 'line',
        symbol: 'none', // 关键配置：隐藏数据点
        data: calculateMA(30, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      },
      {
        name: 'MA60',
        type: 'line',
        symbol: 'none', // 关键配置：隐藏数据点
        data: calculateMA(60, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      },
      {
        name: 'MA120',
        type: 'line',
        symbol: 'none', // 关键配置：隐藏数据点
        data: calculateMA(120, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      },
      {
        name: 'MA240',
        type: 'line',
        symbol: 'none', // 关键配置：隐藏数据点
        data: calculateMA(240, data),
        smooth: true,
        lineStyle: {
          opacity: 0.3
        }
      }
    ]
  }),
  true
)
